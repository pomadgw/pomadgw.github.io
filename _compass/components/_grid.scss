@if (not $settings-imported) {
  @warn "Hmm";
}

$gutter-width: 1rem;
$half-gutter-width: $gutter-width / 2;
$gutter-compensation: -1 * $half-gutter-width;

@mixin grid($col-num) {
  $parent: &;

  box-sizing: border-box;
  display: flex;
  flex-wrap: wrap;

  &__cell {
    box-sizing: border-box;
    padding-right: $half-gutter-width;
    padding-left: $half-gutter-width;
    flex: 0 1 auto;
    flex-grow: 0;
    flex-shrink: 0;
  }

  &__cell--fit {
    flex: 1;
    max-width: 100%;
  }

  @for $i from 1 through $col-num {
    $percent: $i / $col-num * 100%;
    &__cell--#{$i} {
      flex: 0 1 $percent;
    }
  }

  $breakpoints: ('small', 'medium', 'large', 'huge');
  @each $breakpoint in $breakpoints {
    @include mq($breakpoint) {
      @for $i from 1 through $col-num {
        $percent: $i / $col-num * 100%;
        #{$parent}__cell--#{$breakpoint}-#{$i} {
          flex: 0 1 $percent;
          max-width: $percent;
        }
      }
    }
  }
}

@mixin grid-gutter {
  // gutter
  margin-right: $gutter-compensation;
  margin-left: $gutter-compensation;
}

.#{$global-namespace}grid {
  @include grid(12);
  @include grid-gutter;
}
